# Contributor: Paul Bredbury <brebs@sent.com>

pkgname=awesfx
pkgver=0.5.1c
pkgrel=3
pkgdesc="Utilities for emu10k1 cards (e.g. asfxload)"
arch=(i686 x86_64)
# No proper homepage
# http://www.alsa-project.org/~tiwai/awedrv.html
url="http://ftp.suse.com/pub/people/tiwai/awesfx/"
license=('GPL')
depends=('alsa-lib')
makedepends=('autoconf' 'automake' 'libtool')
source=(http://ftp.suse.com/pub/people/tiwai/awesfx/awesfx-${pkgver}.tar.bz2
awesfx-0.5.1c-getline.patch
)

md5sums=('73f940279f909bfa5ad307d904bc88da'
         '315f33727abea43bcd723eb7edc5f747')

build() {
  cd ${startdir}/src/awesfx-${pkgver}

  patch < $srcdir/awesfx-0.5.1c-getline.patch
  autoreconf -fi || return 1  # As in awesfx-0.5.1c/etc/awesfx.spec

  ./configure --prefix=/usr || return 1
  make || return 1
  make DESTDIR=${startdir}/pkg install || return 1

  # Docs
  mkdir -p $startdir/pkg/usr/share/doc/$pkgname
  install -m644 -t $startdir/pkg/usr/share/doc/$pkgname/ ChangeLog README || return 1
}
